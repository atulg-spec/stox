<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width" />
    {% block metatags %}
    <meta name="description" content="Onstock your portfolio manager, Onstock stock market, | Portfolio manager" />
    <meta name="keywords" content="Onstock your portfolio manager, Onstock stock market, | Portfolio manager">
    <link rel="canonical" href="https://Onstock.in">
    <meta name="author" content="Onstock">
    {% endblock metatags %}
    <meta name="robots" content="index, follow">
    <link rel="shortcut icon" type="image/x-icon" href="/static/images/brand/logo/logo-primary.svg" />
    <!-- Libs CSS -->
    <!-- Theme CSS -->
    <link href="/static/css/tailwind.css" rel="stylesheet">
    <link rel="stylesheet" href="/static/css/theme.min.css">
    <link rel="stylesheet" href="/static/libs/apexcharts/dist/apexcharts.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <title>{% block title %}{% endblock title %}</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body>
    <main>
        <!-- start the project -->
        <!-- app layout -->
        <div id="app-layout" class="overflow-x-hidden flex">
            <!-- start navbar -->
            <nav class="navbar-vertical navbar">
                <div id="myScrollableElement" class="h-screen" data-simplebar>
                    <!-- brand logo -->
                    <a class="navbar-brand" href="/market">
                        <h4 class="text-white">Onstock</h4>
                        <!-- <img src="/static/images/brand/logo/logo.svg" width="50%" alt="" /> -->
                    </a>

                    <!-- navbar nav -->
                    <ul class="navbar-nav flex-col" id="sideNavbar">
                        <li class="nav-item">
                            <a class="nav-link  active " href="/market">
                                <i data-feather="home" class="w-4 h-4 mr-2"></i>
                                Home
                            </a>
                        </li>
                        <!-- nav item -->
                        <li class="nav-item">
                            <div class="navbar-heading">Watchlist</div>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link " href="/watchlist">
                                <i data-feather="bar-chart-2" class="w-4 h-4 mr-2"></i>
                                Watchlist
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link " href="/portfolio">
                                <i data-feather="database" class="w-4 h-4 mr-2"></i>
                                Portfolio
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link " href="/orders">
                                <i data-feather="clipboard" class="w-4 h-4 mr-2"></i>
                                Orders
                            </a>
                        </li>
                        <!-- nav heading -->
                        <li class="nav-item">
                            <div class="navbar-heading">Profile</div>
                        </li>

                        <!-- nav item -->
                        <li class="nav-item">
                            <a class="nav-link " href="/profile">
                                <i data-feather="user" class="w-4 h-4 mr-2"></i>
                                Profile
                            </a>
                        </li>
                        <!-- nav item -->
                        <li class="nav-item">
                            <a class="nav-link " href="/contact">
                                <i data-feather="phone" class="w-4 h-4 mr-2"></i>
                                Support
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>
            <!--end of navbar-->

            <!-- app layout content -->
            <div id="app-layout-content"
                class="min-h-screen w-full min-w-[100vw] md:min-w-0 ml-[15.625rem] [transition:margin_0.25s_ease-out]">
                <!-- start navbar -->
                <div class="header">
                    <!-- navbar -->
                    <nav class="bg-white px-6 py-[10px] flex items-center shadow-sm">
                        <a id="nav-toggle" href="#" class="text-gray-800">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                                stroke="currentColor" class="w-6 h-6">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
                            </svg>
                        </a>
                        <div class="ml-3 w-full" id="main-logo">
                            <a class="navbar-brand" href="/market">
                                <h4 class="text-dark">Onstock</h4>
                                <!-- <img src="/static/images/brand/logo/logo.svg" width="50%" alt="" /> -->
                            </a>
                        </div>
                        <div class="ml-3 w-full">
                            <!-- form -->
                            <i data-feather="search" class="text-indigo-600 font-bold w-4 h-4 mr-2"
                                style="float: inline-end;font-weight: 700;" onclick="search()" id="search-icon"></i>

                            <form class="flex items-center hidden" id="search-form">
                                <input type="search"
                                    class="border w-full border-gray-300 text-gray-900 rounded focus:ring-indigo-600 focus:border-indigo-600 block p-2 px-3 disabled:opacity-50 disabled:pointer-events-none"
                                    id="search-input" id="search-input" placeholder="SBIN-EQ" />
                                <i data-feather="x" class="text-gray-800 font-bold w-4 h-4 ml-4"
                                    style="float: inline-end;font-weight: 700;font-size: larger;"
                                    onclick="search()"></i>
                            </form>
                        </div>
                        <!-- navbar nav -->

                    </nav>
                    <div class="z-10 bg-white divide-y divide-gray-900 rounded-lg">
                        <ul class="py-2 text-black hidden" id="suggestions">
                        </ul>
                    </div>
                </div>



                {% if messages %}
                <div class="space-y-5">
                    {% for message in messages %}
                    {% if message.tags == 'success' %}
                    <div class="bg-teal-50 border-t-2 border-teal-500 rounded-lg p-4" role="alert">
                        <div class="flex">
                            <div class="flex-shrink-0">
                                <!-- Icon -->
                                <span
                                    class="inline-flex justify-center items-center size-8 rounded-full border-4 border-teal-100 bg-teal-200 text-teal-800">
                                    <svg class="flex-shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24"
                                        height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path
                                            d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z">
                                        </path>
                                        <path d="m9 12 2 2 4-4"></path>
                                    </svg>
                                </span>
                                <!-- End Icon -->
                            </div>
                            <div class="ms-3">
                                <h3 class="text-gray-800 font-semibold">{{ message.tags|capfirst }}</h3>
                                <p class="text-sm text-gray-700">{{ message }}</p>
                            </div>
                        </div>
                    </div>
                    {% elif message.tags == 'error' %}
                    <div class="bg-red-50 border-s-4 border-red-500 p-4" role="alert">
                        <div class="flex">
                            <div class="flex-shrink-0">
                                <!-- Icon -->
                                <span
                                    class="inline-flex justify-center items-center size-8 rounded-full border-4 border-red-100 bg-red-200 text-red-800">
                                    <svg class="flex-shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24"
                                        height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M18 6 6 18"></path>
                                        <path d="m6 6 12 12"></path>
                                    </svg>
                                </span>
                                <!-- End Icon -->
                            </div>
                            <div class="ms-3">
                                <h3 class="text-gray-800 font-semibold">{{ message.tags|capfirst }}</h3>
                                <p class="text-sm text-gray-700">{{ message }}</p>
                            </div>
                        </div>
                    </div>
                    {% elif message.tags == 'warning' %}
                    <div class="bg-yellow-50 border-s-4 border-yellow-500 p-4" role="alert">
                        <div class="flex">
                            <div class="flex-shrink-0">
                                <!-- Icon -->
                                <span
                                    class="inline-flex justify-center items-center size-8 rounded-full border-4 border-yellow-100 bg-yellow-200 text-yellow-800">
                                    <svg class="flex-shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24"
                                        height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path
                                            d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z">
                                        </path>
                                        <path d="M12 8v4h4"></path>
                                    </svg>
                                </span>
                                <!-- End Icon -->
                            </div>
                            <div class="ms-3">
                                <h3 class="text-gray-800 font-semibold">{{ message.tags|capfirst }}</h3>
                                <p class="text-sm text-gray-700">{{ message }}</p>
                            </div>
                        </div>
                    </div>
                    {% elif message.tags == 'info' %}
                    <div class="bg-blue-50 border-s-4 border-blue-500 p-4" role="alert">
                        <div class="flex">
                            <div class="flex-shrink-0">
                                <!-- Icon -->
                                <span
                                    class="inline-flex justify-center items-center size-8 rounded-full border-4 border-blue-100 bg-blue-200 text-blue-800">
                                    <svg class="flex-shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24"
                                        height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path
                                            d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z">
                                        </path>
                                        <path d="M12 8v4h4"></path>
                                    </svg>
                                </span>
                                <!-- End Icon -->
                            </div>
                            <div class="ms-3">
                                <h3 class="text-gray-800 font-semibold">{{ message.tags|capfirst }}</h3>
                                <p class="text-sm text-gray-700">{{ message }}</p>
                            </div>
                        </div>
                    </div>
                    {% else %}
                    <div class="bg-gray-50 border-s-4 border-gray-500 p-4" role="alert">
                        <div class="flex">
                            <div class="flex-shrink-0">
                                <!-- Icon -->
                                <span
                                    class="inline-flex justify-center items-center size-8 rounded-full border-4 border-gray-100 bg-gray-200 text-gray-800">
                                    <svg class="flex-shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24"
                                        height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path
                                            d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z">
                                        </path>
                                        <path d="M12 8v4h4"></path>
                                    </svg>
                                </span>
                                <!-- End Icon -->
                            </div>
                            <div class="ms-3">
                                <h3 class="text-gray-800 font-semibold">{{ message.tags|capfirst }}</h3>
                                <p class="text-sm text-gray-700">{{ message }}</p>
                            </div>
                        </div>
                    </div>
                    {% endif %}
                    {% endfor %}
                </div>
                {% endif %}


                {% block body %}
                {% endblock body %}
            </div>

            <div class="fixed z-50 bottom-0 bg-white w-full mb-4 rounded-lg overflow-x-auto" id="bottom_usage_tab">
                <ul class="flex flex-nowrap text-sm font-medium text-center text-gray-500 dark:text-gray-400"
                    id="select_watchlist_tab">

                </ul>
            </div>
            <div class="fixed z-50 bottom-0 bg-white w-full mb-4 rounded-lg overflow-x-auto">
                <ul class="flex flex-nowrap text-sm font-medium text-center text-gray-500 dark:text-gray-400"
                    id="delete_watchlist_tab">

                </ul>
            </div>
        </div>
        <!-- end of project -->
    </main>

    <!-- component -->
    <div class="w-full h-screen lg:hidden">
        <!-- <section id="bottom-navigation" class="md:hidden block fixed inset-x-0 bottom-0 z-10 bg-white shadow"> // if shown only tablet/mobile-->
        <section id="bottom-navigation" class="block fixed inset-x-0 bottom-0 z-10 bg-white shadow">
            <div id="tabs" class="flex justify-between">
                <a href="/market"
                    class="w-full focus:text-teal-500 hover:text-teal-500 justify-center inline-block text-center pt-2 pb-1">
                    <i data-feather="home" class="inline-block mb-1"></i>
                    <span class="tab tab-home block text-xs">Home</span>
                </a>
                <a href="/watchlist"
                    class="w-full focus:text-teal-500 hover:text-teal-500 justify-center inline-block text-center pt-2 pb-1">
                    <i data-feather="star" class="inline-block mb-1"></i>
                    <span class="tab tab-kategori block text-xs">Watchlist</span>
                </a>
                <a href="/portfolio"
                    class="w-full focus:text-teal-500 hover:text-teal-500 justify-center inline-block text-center pt-2 pb-1">
                    <i data-feather="folder-minus" class="inline-block mb-1"></i>
                    <span class="tab tab-explore block text-xs">Portfolio</span>
                </a>
                <a href="/orders"
                    class="w-full focus:text-teal-500 hover:text-teal-500 justify-center inline-block text-center pt-2 pb-1">
                    <i data-feather="clipboard" class="inline-block mb-1"></i>
                    <span class="tab tab-whishlist block text-xs">Orders</span>
                </a>
                <a href="/profile"
                    class="w-full focus:text-teal-500 hover:text-teal-500 justify-center inline-block text-center pt-2 pb-1">
                    <i data-feather="user" class="inline-block mb-1"></i>
                    <span class="tab tab-account block text-xs">Account</span>
                </a>
            </div>
        </section>
    </div>




    <script>
        let symbols_list = []
        function search() {
            // Get the elements by their IDs
            const searchIcon = document.getElementById('search-icon');
            const mainLogo = document.getElementById('main-logo');

            // Check if the elements exist
            if (searchIcon && mainLogo) {
                // Add a click event listener to the search icon
                // Add the 'hidden' class to the main logo
                mainLogo.classList.toggle('hidden');
                document.getElementById('nav-toggle').classList.toggle('hidden');
                document.getElementById('search-icon').classList.toggle('hidden');
                document.getElementById('search-form').classList.toggle('hidden');
                document.getElementById('search-input').focus();
                document.getElementById('suggestions').classList.add('hidden');
                document.getElementById('select_watchlist_tab').innerHTML = "";
                symbols_list = []
            } else {
                console.error('One or both of the elements with IDs "search-icon" and "main-logo" do not exist.');
            }
        }

        $(document).ready(function () {
            $('#search-input').on('input', function () {
                document.getElementById('suggestions').classList.remove('hidden');
                var query = $(this).val();
                if (query.length > 1) {
                    $.ajax({
                        url: "{% url 'search_instruments' %}",
                        data: { 'q': query },
                        success: function (data) {
                            $('#suggestions').empty();
                            data.forEach(function (item) {
                                $('#suggestions').append('<li class="flex justify-between rounded-lg w-full px-8 py-2 border border-gray-100"><span><span class="text-dark">' + item.tradingsymbol + '</span><br><span class="text-sm">' + item.exchange + '</span></span><span onclick="add(\'' + item.tradingsymbol + '\', \'' + item.exchange + '\')"><svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="27" height="27" viewBox="0 0 32 32"><path d="M19 3A1 1 0 1019 5 1 1 0 1019 3zM16 3A1 1 0 1016 5 1 1 0 1016 3zM13 3A1 1 0 1013 5 1 1 0 1013 3zM25 6A1 1 0 1025 8 1 1 0 1025 6zM22 3A1 1 0 1022 5 1 1 0 1022 3zM7 6A1 1 0 107 8 1 1 0 107 6zM10 3A1 1 0 1010 5 1 1 0 1010 3zM28 9A1 1 0 1028 11 1 1 0 1028 9zM4 9A1 1 0 104 11 1 1 0 104 9zM4 12A1 1 0 104 14 1 1 0 104 12zM4 15A1 1 0 104 17 1 1 0 104 15zM4 18A1 1 0 104 20 1 1 0 104 18zM7 24A1 1 0 107 26 1 1 0 107 24zM4 21A1 1 0 104 23 1 1 0 104 21zM25 24A1 1 0 1025 26 1 1 0 1025 24zM28 12A1 1 0 1028 14 1 1 0 1028 12zM28 15A1 1 0 1028 17 1 1 0 1028 15zM28 18A1 1 0 1028 20 1 1 0 1028 18zM28 21A1 1 0 1028 23 1 1 0 1028 21zM22 27A1 1 0 1022 29 1 1 0 1022 27zM10 27A1 1 0 1010 29 1 1 0 1010 27zM19 27A1 1 0 1019 29 1 1 0 1019 27zM16 27A1 1 0 1016 29 1 1 0 1016 27zM16 12A1 1 0 1016 14 1 1 0 1016 12zM16 15A1 1 0 1016 17 1 1 0 1016 15zM16 18A1 1 0 1016 20 1 1 0 1016 18zM16 21A1 1 0 1016 23 1 1 0 1016 21zM16 9A1 1 0 1016 11 1 1 0 1016 9zM19 15A1 1 0 1019 17 1 1 0 1019 15zM13 15A1 1 0 1013 17 1 1 0 1013 15zM10 15A1 1 0 1010 17 1 1 0 1010 15zM22 15A1 1 0 1022 17 1 1 0 1022 15zM13 27A1 1 0 1013 29 1 1 0 1013 27z"></path></svg></span></li>');
                            });
                        }
                    });
                } else {
                    $('#suggestions').empty();
                }
            });
        });

        function add(tradingsymbol, exchange) {
            symbols_list.push({ "symbol": tradingsymbol, "exchange": exchange })
            let content = '<span class="fixed right-0"><a class="inline-block px-8 py-3 text-white bg-indigo-600 rounded-lg active"onclick="initiate_add()">Add</a></span>'
            for (let i of symbols_list.reverse()) {
                content = content +
                    `
                <li class="me-2 inline-block px-4 py-3 h-10 min-w-32 text-white bg-blue-600 rounded-lg active">
                        ${i.symbol}
                </li>
                `
                console.log(i);
            }
            document.getElementById('select_watchlist_tab').innerHTML = content
        }

        function initiate_add() {
            document.getElementById('bottom_usage_tab').innerHTML =
                `
            <form method="POST" action="/add_watchlist">
                {% csrf_token %}
                <div class="bg-white border-2 shadow p-2 relative rounded-lg flex">
                  <input type="hidden" name="data" value=${JSON.stringify(symbols_list)}>
                  <input name="tag_input" id="tag_input" class="border-indigo-600 outline-none border-0 w-full rounded-lg p-2" type="text" placeholder="Favourites" required>
                  <button type="submit" class="fixed right-0"><a class="inline-block px-8 py-3 text-white bg-indigo-600 rounded-lg active">Add</a></button>
                </div>
            </form>
            `
        }

    </script>

    <script src="/static/libs/apexcharts/dist/apexcharts.min.js"></script>

    <!-- Libs JS -->
    <script src="/static/libs/feather-icons/dist/feather.min.js"></script>
    <script src="/static/libs/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/static/libs/simplebar/dist/simplebar.min.js"></script>

    <!-- Theme JS -->
    <script src="/static/js/theme.min.js"></script>

</body>

</html>